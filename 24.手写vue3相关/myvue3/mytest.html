<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>手写Vue3</title>
</head>
<body>
  手写版本
  <div id="app"></div>
  <script src="./packages/reactivity/dist/reactivity.global.js"></script>
  <script>
    const { effect, reactive, toRaw, ref, toRef } = VueReactivity
    
    let a = {
      name: '跳跳',
      age: 2,
      getName() {
        return this.name
      },
      friend: {
        name: '糯米',
        age: 1,
        xxx() {
          return this.age
        }
      }
    }
    // console.log('reactive', reactive);
    let p1 = reactive(a)
    // let p2 = reactive(a)
    // let p3 = reactive(p1)
    // // p1 === p2 true
    // console.log(p1 === p2);
    // console.log(p1 === p3);

    // const ef = effect(() => {
    //   document.querySelector('#app').innerHTML =  `小猫叫${p1.name}, 今年${p1.age}岁了`
    //   console.log(p1.name);
    // }, {scheduler(){
    //   console.log('自定义函数');
    // }})
    // ef()
    // console.log(p1.name);
      // console.log(p1);
      // let b = toRaw(p1)
      // let c = ref(111)
      const age = toRef(p1, 'age')
      console.log('age', age);
      effect(() => {
        document.querySelector('#app').innerHTML = `测试一下${age.value}`
      })

  </script>
</body>
</html>